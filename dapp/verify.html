<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">

</head>

<body>


    <video id="scanner"></video>

    <div id="qrdata"></div>

    <script src="/scripts/qr-scanner.umd.min.js"></script>
    <script>
        var videoElem = document.getElementById('scanner');
        var dataElem = document.getElementById('qrdata');
        const qrScanner = new QrScanner(
            videoElem,
            async result => {
                if ("data" in result) {
                    qrScanner.stop();
                    console.log('decoded qr code:', result.data);
                    dataElem.innerText = JSON.stringify(result.data);
                    var d = result.data;
                    console.log(d.address);
                    const verifyURL = `https://api.momentix.xyz/verify?address=${d.address}&event=${d.event}&tokenId=${d.tokenId}&hash=${d.hash}`;
                    console.log(verifyURL);
                    const response = await fetch(verifyURL);
                    const responseText = await response.json();
                    console.log(responseText);
                    dataElem.innerText = JSON.stringify(responseText);
                }
            },
            { /* your options or returnDetailedScanResult: true if you're not specifying any other options */ },
        );
        qrScanner.start();
    </script>
</body>

</html>